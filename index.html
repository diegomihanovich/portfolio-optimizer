<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Test Stooq</title>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script></head>
<body>
<h2>Prueba de descarga AAPL (Stooq)</h2>
<script>
(async () => {
  const url = "https://corsproxy.io/?https://stooq.com/q/d/l/?s=AAPL.US&i=d";
  console.log("ğŸŒ URL:", url);
  try {
    const res = await fetch(url);
    if(!res.ok) throw new Error(res.status + " " + res.statusText);
    const csv = await res.text();
    console.log("ğŸ” CSV crudo (primeras 200):\n", csv.slice(0,200));
    const { data } = Papa.parse(csv, { header:true, dynamicTyping:true });
    console.log("âœ… Filas parseadas:", data.length);
    console.table(data.slice(0,5));    // muestra 5 primeras filas
  } catch(e){
    console.error("âŒ Error:", e.message);
    alert(e.message);
  }
})();
</script>
</body></html>
